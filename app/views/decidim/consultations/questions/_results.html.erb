<% if question.sorted_results.any? %>
  <div class=row>
    <h2 class=section-heading><%= t "questions.results.title", scope: "decidim" %></h2>
  <% if question.multiple? %>
    <%= render partial: "decidim/consultations/question_multiple_votes/results_rules", locals: { question: question } %>
  <% end %>

  <% if question.grouped? %>
    <% question.grouped_responses.each do |group, responses| %>
      <div class="card card--list">
        <div class="card-divider">
          <h4><%= translated_attribute group.title %></h4>
        </div>

        <% responses.sort_by{|r| -r[:votes_count]}.each do |response| %>
          <div class=card--list__item>
            <div class="card--list__text"><%= translated_attribute response.title %></div>

            <div class="card--list__data">
              <span class="card--list__data__number"><%= response.votes_count %></span>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <div class="card card--list">
      <% question.sorted_results.sort_by{|r| -r[:votes_count]}.each do |response| %>
        <div class=card--list__item>
          <div class="card--list__text"><%= translated_attribute response.title %></div>

          <div class="card--list__data">
            <span class="card--list__data__number"><%= response.votes_count %></span>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
